import{_ as h,u as v,a as k,r as c,c as S,b as p,d as F,e as u,f as r,o as n,g as e,h as V,w as j,i as m,j as f,k as N,l as i,m as x,n as P,t as B}from"./index-ChCkEX9-.js";const E={class:"w-full h-full bg-[#F8F8F8] flex justify-start items-center flex-col lg:px-8"},L={class:"bg-white p-8 rounded-[12px] gap-y-2 my-auto flex flex-col w-full max-w-xl"},T={class:"flex flex-col gap-y-1 pt-3"},$={key:0,class:"bg-red-100 rounded-[12px] flex gap-2 py-3 mt-4 px-4 items-center text-sm text-start"},q={class:"flex justify-end items-center w-full mt-4"},A=["disabled"],I={key:0,class:""},M={key:1},R={__name:"LoginPage",setup(C){const a=v(),g=k(),o=c(""),l=c(!1),w=S({email:p().required("البريد الالكتروني مطلوب"),password:p().required("كلمة المرور مطلوبة")}),{handleSubmit:y}=F({validationSchema:w,initialValues:{email:"",password:""}}),d=y(async t=>{l.value=!0,o.value="";try{const s=await u.post("users/login/",{email:t.email,password:t.password});a.setAccessToken(s.data.access),a.setRefreshToken(s.data.refresh),await _(),g.push({name:a.role==="owner"?"dashboard-home":"dashboard-shipmentslist"})}catch(s){o.value="البريد الالكتروني أو كلمة المرور غير صحيحة",console.log("Login error:",s)}finally{l.value=!1}}),_=async()=>{try{const t=await u.get("users/profile/");a.setUser(t.data)}catch(t){console.log("Profile error:",t)}};return(t,s)=>(n(),r("div",E,[s[6]||(s[6]=e("div",{class:"py-5 flex items-start w-full px-3 justify-start"},[e("img",{src:V,alt:"logo",class:"w-40"})],-1)),e("div",L,[s[4]||(s[4]=e("h1",{class:"text-xl font-bold text-start"},"تسجيل الدخول",-1)),s[5]||(s[5]=e("p",{class:"text-[#494949] text-sm text-start"}," ادخل اسم المستخدم وكلمة المرور ",-1)),e("form",{action:"",onSubmit:s[0]||(s[0]=j((...b)=>m(d)&&m(d)(...b),["prevent"]))},[e("div",T,[s[2]||(s[2]=e("label",{for:"email",class:"text-gray-700 text-sm text-start w-full"},[i(" البريد الالكتروني "),e("span",{class:"text-red-500"},"*")],-1)),f(x,{name:"email",type:"text",placeholder:"البريد الالكتروني",class:"mt-2"}),s[3]||(s[3]=e("label",{for:"password",class:"text-gray-700 text-sm text-start mt-4"},[i("كلمة المرور "),e("span",{class:"text-red-500"},"*")],-1)),f(x,{name:"password",type:"password",placeholder:"كلمة المرور",class:"mt-2"}),o.value?(n(),r("span",$,[s[1]||(s[1]=e("img",{src:P,alt:"",class:"h-6"},null,-1)),i(" "+B(o.value),1)])):N("",!0),e("div",q,[e("button",{class:"w-[200px] px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed text-white bg-[#0E5895] rounded-md focus:outline-none focus:shadow-outline",disabled:l.value,type:"submit"},[l.value?(n(),r("span",I," جاري التسجيل ")):(n(),r("span",M,"تسجيل الدخول"))],8,A)])])],32)])]))}},U=h(R,[["__scopeId","data-v-1682aca5"]]);export{U as default};
