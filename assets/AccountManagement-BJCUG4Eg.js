import{p as B,r as i,v as N,c,o as a,m as w,a as s,E as V,A as E,u as o,b as F,d as m,l as h,k as d}from"./index-SbUJ2NJI.js";import{c as L,a as y,b as M,u as P}from"./index.esm-CZ62BXjl.js";import{_ as g}from"./InputField.vue_vue_type_script_setup_true_lang-BuJRT2k5.js";import{r as v,a as C}from"./EyeIcon-DOKuZlNd.js";const S="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='32'%20height='32'%20rx='16'%20fill='%23219653'/%3e%3cg%20clip-path='url(%23clip0_326_5317)'%3e%3cpath%20d='M22.8793%2010.954L13.6666%2020.166C13.6047%2020.2282%2013.5311%2020.2775%2013.45%2020.3112C13.369%2020.3449%2013.2821%2020.3622%2013.1943%2020.3622C13.1065%2020.3622%2013.0196%2020.3449%2012.9386%2020.3112C12.8575%2020.2775%2012.7839%2020.2282%2012.722%2020.166L9.15929%2016.6C9.09735%2016.5378%209.02374%2016.4885%208.94269%2016.4548C8.86163%2016.4211%208.77473%2016.4038%208.68696%2016.4038C8.59919%2016.4038%208.51228%2016.4211%208.43123%2016.4548C8.35017%2016.4885%208.27657%2016.5378%208.21463%2016.6C8.15244%2016.6619%208.1031%2016.7356%208.06943%2016.8166C8.03576%2016.8977%208.01843%2016.9846%208.01843%2017.0723C8.01843%2017.1601%208.03576%2017.247%208.06943%2017.3281C8.1031%2017.4091%208.15244%2017.4827%208.21463%2017.5447L11.7786%2021.108C12.1546%2021.4833%2012.6641%2021.694%2013.1953%2021.694C13.7265%2021.694%2014.236%2021.4833%2014.612%2021.108L23.824%2011.898C23.886%2011.8361%2023.9353%2011.7625%2023.9689%2011.6815C24.0025%2011.6005%2024.0198%2011.5137%2024.0198%2011.426C24.0198%2011.3383%2024.0025%2011.2515%2023.9689%2011.1705C23.9353%2011.0895%2023.886%2011.0159%2023.824%2010.954C23.762%2010.8918%2023.6884%2010.8425%2023.6074%2010.8088C23.5263%2010.7751%2023.4394%2010.7578%2023.3516%2010.7578C23.2639%2010.7578%2023.177%2010.7751%2023.0959%2010.8088C23.0148%2010.8425%2022.9412%2010.8918%2022.8793%2010.954Z'%20fill='white'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_326_5317'%3e%3crect%20width='16'%20height='16'%20fill='white'%20transform='translate(8%208)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",T={class:"w-full flex flex-col gap-y-2"},j={class:"w-full h-full flex justify-center items-center"},q={class:"bg-white p-8 rounded-[12px] gap-y-2 my-auto flex flex-col w-full max-w-xl"},A={class:"flex flex-col gap-y-1 pt-3"},D={key:0,class:"bg-green-100 rounded-[12px] flex gap-2 py-3 mt-4 px-4 items-center text-sm text-start"},O={class:"flex justify-end items-center w-full gap-2 mt-4"},Z=["disabled"],z={key:0,class:""},G={key:1},R={__name:"AccountManagement",setup(H){const p=B(),r=i(!1),f=i(!1),l=i(!1),n=i(!1),b=L({new_password:y().required("كلمة المرور الجديدة مطلوبة").min(6,"كلمة المرور يجب أن تكون 6 أحرف على الأقل"),confirm_new_password:y().required("تأكيد كلمة المرور الجديدة مطلوبة").oneOf([M("new_password")],"كلمة المرور الجديدة وتأكيدها غير متطابقتين")}),{handleSubmit:k,resetForm:$,setFieldError:x}=P({validationSchema:b,initialValues:{new_password:"",confirm_new_password:""}}),_=k(async u=>{r.value=!0,f.value=!1;try{await N.patch("users/profile/",{password:u.new_password,confirm_password:u.confirm_new_password}),f.value=!0,p.success("تم تغيير كلمة المرور بنجاح"),$()}catch(e){const t=e.response?.data;t?(t.password&&x("new_password",t.password[0]),t.confirm_password&&x("confirm_new_password",t.confirm_password[0]),p.error(t.message||"حدث خطأ ما")):p.error("حدث خطأ غير متوقع")}finally{r.value=!1}});return(u,e)=>(a(),c("div",T,[w(V,{title:"تغيير كلمة المرور",buttonText:"تغيير كلمة المرور",type:"2"}),s("div",j,[s("div",q,[e[6]||(e[6]=s("h1",{class:"text-xl font-bold text-start"},"تغيير كلمة المرور",-1)),e[7]||(e[7]=s("p",{class:"text-[#494949] text-sm text-start"}," ادخل كلمة المرور الحالية والجديدة ",-1)),s("form",{action:"",onSubmit:e[2]||(e[2]=E((...t)=>o(_)&&o(_)(...t),["prevent"]))},[s("div",A,[e[4]||(e[4]=s("label",{for:"new_password",class:"text-gray-700 text-sm text-start mt-4"},[m("كلمة المرور الجديدة "),s("span",{class:"text-red-500"},"*")],-1)),w(g,{name:"new_password",type:l.value?"text":"password",placeholder:"كلمة المرور الجديدة",class:"mt-2"},{suffix:h(()=>[s("button",{type:"button",onClick:e[0]||(e[0]=t=>l.value=!l.value),class:"text-gray-400 hover:text-gray-600 focus:outline-none"},[l.value?(a(),d(o(C),{key:1,class:"h-5 w-5"})):(a(),d(o(v),{key:0,class:"h-5 w-5"}))])]),_:1},8,["type"]),e[5]||(e[5]=s("label",{for:"confirm_new_password",class:"text-gray-700 text-sm text-start mt-4"},[m("تأكيد كلمة المرور الجديدة "),s("span",{class:"text-red-500"},"*")],-1)),w(g,{name:"confirm_new_password",type:n.value?"text":"password",placeholder:"تأكيد كلمة المرور الجديدة",class:"mt-2"},{suffix:h(()=>[s("button",{type:"button",onClick:e[1]||(e[1]=t=>n.value=!n.value),class:"text-gray-400 hover:text-gray-600 focus:outline-none"},[n.value?(a(),d(o(C),{key:1,class:"h-5 w-5"})):(a(),d(o(v),{key:0,class:"h-5 w-5"}))])]),_:1},8,["type"]),f.value?(a(),c("span",D,[...e[3]||(e[3]=[s("img",{src:S,alt:"",class:"h-6"},null,-1),m(" تم تغيير كلمة المرور بنجاح. ",-1)])])):F("",!0),s("div",O,[s("button",{class:"w-[160px] px-4 py-2 min-h-[48px] text-white bg-[#0E5895] rounded-[12px] focus:outline-none focus:shadow-outline",disabled:r.value,type:"submit"},[r.value?(a(),c("span",z," جاري التغيير ")):(a(),c("span",G,"تغيير كلمة المرور "))],8,Z)])])],32)])])]))}};export{R as default};
