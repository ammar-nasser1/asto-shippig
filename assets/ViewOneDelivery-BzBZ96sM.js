import{p as q,M as R,r as i,f as z,v as B,y as S,c as v,o as m,a as e,m as r,l as o,A as H,u as h,b as F,d as x,t as p,z as j,x as O,g as P,k as G,U as Z,D as J}from"./index-SbUJ2NJI.js";import{_ as K}from"./eye-BFqmBmJx.js";import{s as Q,m as N,v as W}from"./viewOneLoading-CiZokuk4.js";import{f as T}from"./formateDate-DG_0Qep_.js";import{_ as A}from"./StatCard-1J-BazqW.js";import{c as X,a as Y,d as ee,u as te}from"./index.esm-CZ62BXjl.js";import{_ as U}from"./InputField.vue_vue_type_script_setup_true_lang-BuJRT2k5.js";import{_ as ae}from"./InfoRow-JQf5R54O.js";const se={class:"flex flex-col gap-2 w-full bg-white rounded-2xl h-full shadow-sm px-2 py-2"},le={class:"bg-white flex flex-wrap lg:flex-nowrap gap-2 justify-between items-center text-gray-800 text-sm"},ne={class:"flex flex-col gap-y-3 pt-3"},oe={key:0,class:"bg-[#E8F0F8] text-[#0E5895] text-sm rounded-xl py-3 px-4 flex items-center gap-2"},re={key:1,class:"bg-[#FDE8E8] text-[#E73A3A] text-sm rounded-xl py-3 px-4 flex items-center gap-2"},ie={class:"flex flex-col gap-2 text-end"},de={for:"file",class:"font-medium text-gray-700 text-end",dir:"rtl"},ce={class:"relative flex items-center justify-between border border-gray-300 rounded-lg p-2 bg-white"},ue={class:"text-gray-500 truncate text-sm"},pe={key:0,class:"mt-2"},me=["src"],ve={class:"flex justify-end gap-2 mt-4"},ge=["disabled"],fe={__name:"MerchanTransaction",emits:["update"],setup(I,{emit:E}){const b=q(),w=R(),g=i(!1),u=i("withdraw"),d=E,C=X({amount:ee().transform((s,t)=>t===""?void 0:s).required("Ø§Ù„Ù…Ø¨Ù„Øº Ù…Ø·Ù„ÙˆØ¨").positive("ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ù…Ø¨Ù„Øº Ø£ÙƒØ¨Ø± Ù…Ù† 0").typeError("ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ù…Ø¨Ù„Øº Ø±Ù‚Ù…Ø§Ù‹"),reason:Y().required("Ø§Ù„Ø³Ø¨Ø¨ Ù…Ø·Ù„ÙˆØ¨")}),{handleSubmit:k,resetForm:L}=te({validationSchema:C,initialValues:{amount:"",reason:"",user_account:w.params.id}}),n=i(null),c=i(null),V=()=>document.getElementById("file").click(),$=s=>{const t=s.target.files[0];t&&(n.value=t,c.value=URL.createObjectURL(t))},D=s=>{u.value=s,g.value=!0},_=()=>{g.value=!1,L(),n.value=null,c.value=null},M=z(()=>u.value==="withdraw"?"ØªØ­ÙˆÙŠÙ„ Ø£Ù…ÙˆØ§Ù„ Ù„Ù„Ù…Ù†Ø¯ÙˆØ¨":"ØªØ­ØµÙŠÙ„ Ø£Ù…ÙˆØ§Ù„ Ù…Ù† Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨"),y=i(!1),f=k(async s=>{const t={transaction_type:u.value,amount:s.amount,notes:s.reason,user_account:s.user_account,file:n.value?n.value:null};try{y.value=!0;const l=await B.post("transactions/user/",t,{headers:{"Content-Type":"multipart/form-data"}});b.success(u.value==="withdraw"?" ØªÙ… ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø£Ù…ÙˆØ§Ù„ Ù„Ù„Ù…Ù†Ø¯ÙˆØ¨ Ø¨Ù†Ø¬Ø§Ø­":" ØªÙ… ØªØ­ØµÙŠÙ„ Ø§Ù„Ø£Ù…ÙˆØ§Ù„ Ù…Ù† Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ Ø¨Ù†Ø¬Ø§Ø­"),_()}catch(l){console.error("API Error:",l);const a=l.response?.data?.message||" Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©";b.error(a)}finally{y.value=!1,d("update")}});return(s,t)=>{const l=S("GenericModal");return m(),v("div",se,[t[11]||(t[11]=e("h3",{class:"text-[#8A8A8A] px-2"},"Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª",-1)),e("div",le,[e("button",{onClick:t[0]||(t[0]=a=>D("withdraw")),class:"border w-full border-[#0E5895] text-[#0E5895] rounded-xl p-3 mb-1 flex justify-center items-center gap-2"},[...t[4]||(t[4]=[e("svg",{width:"9",height:"16",viewBox:"0 0 9 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M8.31811 11.86C8.25613 11.7975 8.1824 11.7479 8.10116 11.7141C8.01992 11.6802 7.93278 11.6628 7.84477 11.6628C7.75677 11.6628 7.66963 11.6802 7.58839 11.7141C7.50715 11.7479 7.43342 11.7975 7.37144 11.86L4.95144 14.28V0.666667C4.95144 0.489856 4.8812 0.320286 4.75618 0.195262C4.63115 0.0702379 4.46159 0 4.28477 0C4.10796 0 3.93839 0.0702379 3.81337 0.195262C3.68835 0.320286 3.61811 0.489856 3.61811 0.666667V14.2733L1.20477 11.86C1.14763 11.7819 1.07416 11.7171 0.989471 11.6703C0.90478 11.6234 0.810898 11.5955 0.714351 11.5886C0.617804 11.5817 0.520907 11.5959 0.430394 11.6302C0.339882 11.6645 0.257926 11.7181 0.190221 11.7872C0.122516 11.8564 0.0706875 11.9395 0.0383367 12.0307C0.00598582 12.122 -0.00611116 12.2191 0.00288668 12.3155C0.0118845 12.4119 0.0417612 12.5052 0.0904404 12.5888C0.13912 12.6725 0.205434 12.7446 0.284773 12.8L2.89811 15.4133C3.27311 15.7879 3.78144 15.9982 4.31144 15.9982C4.84144 15.9982 5.34977 15.7879 5.72477 15.4133L8.33811 12.8C8.45965 12.6725 8.52578 12.502 8.52203 12.3259C8.51828 12.1497 8.44497 11.9822 8.31811 11.86Z",fill:"#0E5895"})],-1),e("span",{class:"text-lg font-medium"},"ØªØ­ÙˆÙŠÙ„ Ø£Ù…ÙˆØ§Ù„ Ù„Ù„Ù…Ù†Ø¯ÙˆØ¨",-1)])]),e("button",{onClick:t[1]||(t[1]=a=>D("deposit")),class:"border w-full text-center bg-[#0E5895] text-white rounded-xl p-3 mb-1 flex justify-center items-center gap-2"},[...t[5]||(t[5]=[e("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M15.4109 0.587602C15.1719 0.345687 14.8745 0.169506 14.5475 0.07608C14.2205 -0.0173459 13.875 -0.0248582 13.5442 0.054269L2.87755 2.30094C2.26327 2.38518 1.68471 2.63925 1.20702 3.03454C0.729331 3.42983 0.371492 3.95064 0.1738 4.53831C-0.0238923 5.12598 -0.0535854 5.75718 0.0880645 6.36081C0.229714 6.96445 0.537081 7.51655 0.97555 7.95494L2.12088 9.0996C2.18287 9.16157 2.23203 9.23516 2.26555 9.31615C2.29907 9.39714 2.31629 9.48395 2.31622 9.5716V11.6836C2.31769 11.9806 2.38605 12.2734 2.51622 12.5403L2.51088 12.5449L2.52822 12.5623C2.72356 12.955 3.0426 13.2727 3.43622 13.4663L3.45355 13.4836L3.45822 13.4783C3.72512 13.6084 4.01793 13.6768 4.31488 13.6783H6.42688C6.60358 13.6781 6.77311 13.7481 6.89822 13.8729L8.04288 15.0176C8.3499 15.328 8.71532 15.5746 9.11807 15.7431C9.52083 15.9117 9.95295 15.9988 10.3896 15.9996C10.7534 15.9991 11.1147 15.9397 11.4595 15.8236C12.0418 15.6324 12.5591 15.2823 12.953 14.8127C13.3469 14.3432 13.6018 13.7729 13.6889 13.1663L15.9389 2.47627C16.0221 2.1427 16.0172 1.79322 15.9246 1.46211C15.8321 1.13101 15.655 0.829649 15.4109 0.587602Z",fill:"white"})],-1),e("span",{class:"text-lg font-medium"},"ØªØ­ØµÙŠÙ„ Ø£Ù…ÙˆØ§Ù„ Ù…Ù† Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨",-1)])])]),r(l,{modelValue:g.value,"onUpdate:modelValue":t[3]||(t[3]=a=>g.value=a),title:M.value,"show-header-icon":!0,size:"large","show-footer":!1,onClose:_},{default:o(()=>[e("form",{onSubmit:t[2]||(t[2]=H((...a)=>h(f)&&h(f)(...a),["prevent"]))},[e("div",ne,[u.value==="withdraw"?(m(),v("div",oe,[...t[6]||(t[6]=[e("i",{class:"fa-solid fa-circle-info"},null,-1),x(" Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¨Ù„Øº Ø¥Ù„Ù‰ Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¨Ø¹Ø¯ Ø§Ù„ØªØ£ÙƒÙŠØ¯. ",-1)])])):F("",!0),u.value==="deposit"?(m(),v("div",re,[...t[7]||(t[7]=[e("i",{class:"fa-solid fa-circle-exclamation"},null,-1),x(" Ø³ÙŠØªÙ… Ø®ØµÙ… Ø§Ù„Ù…Ø¨Ù„Øº Ù…Ø¨Ø§Ø´Ø±Ø© Ø¨Ø¹Ø¯ Ø§Ù„ØªØ£ÙƒÙŠØ¯. ",-1)])])):F("",!0),e("div",null,[t[8]||(t[8]=e("label",{class:"text-sm text-gray-700"},[x("Ø§Ù„Ù…Ø¨Ù„Øº (Ø¬.Ù…) "),e("span",{class:"text-red-500"},"*")],-1)),r(U,{name:"amount",type:"number",placeholder:"Ø§Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø§Ù„Ø¬Ù†ÙŠØ© Ø§Ù„Ù…ØµØ±ÙŠ",class:"mt-2"})]),e("div",null,[t[9]||(t[9]=e("label",{class:"text-sm text-gray-700"},[x("Ø§Ù„Ø³Ø¨Ø¨ Ù…Ù† Ø§Ù„ØªØ­ÙˆÙŠÙ„ "),e("span",{class:"text-red-500"},"*")],-1)),r(U,{name:"reason",type:"text",placeholder:"Ø§Ø¯Ø®Ù„ Ø³Ø¨Ø¨ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø£Ùˆ Ø§Ù„ØªØ­ØµÙŠÙ„",class:"mt-2"})]),e("div",ie,[e("label",de,[t[10]||(t[10]=x("Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) ",-1)),e("div",ce,[e("input",{type:"file",id:"file",class:"hidden",accept:"image/*",onChange:$},null,32),e("span",ue,p(n.value?n.value.name:"Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø£ÙŠ Ù…Ù„Ù"),1),e("button",{type:"button",onClick:V,class:"bg-primary text-white px-3 py-1.5 rounded-md text-sm hover:bg-primary/90"}," Ø§Ø®ØªØ± Ù…Ù„Ù ")])]),c.value?(m(),v("div",pe,[e("img",{src:c.value,alt:"Preview",class:"w-32 h-32 object-cover rounded-lg border"},null,8,me)])):F("",!0)]),e("div",ve,[e("button",{type:"button",onClick:_,class:"px-8 py-2 bg-[#DEDEDE] text-black rounded-xl min-h-[48px]"}," Ø¥Ù„ØºØ§Ø¡ "),e("button",{disabled:y.value,class:j(["disabled:bg-gray-400 disabled:cursor-not-allowed px-8 py-2 text-white rounded-xl min-h-[48px]",[u.value==="withdraw"?"bg-[#0E5895]":"bg-[#E73A3A]"]]),type:"submit"},p(u.value==="withdraw"?"ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„":"ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ­ØµÙŠÙ„"),11,ge)])])],32)]),_:1},8,["modelValue","title"])])}}},xe={key:1,class:"flex flex-col w-full gap-4 h-full overflow-y-scroll"},be={class:"flex justify-between items-center w-full pt-8"},_e={class:"flex gap-2 items-center"},ye={class:"text-2xl font-semibold"},he={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 w-full pt-4"},we={class:"grid grid-cols-12 gap-4"},Ce={class:"text-center"},ke={class:"border border-[#CBD7E1] rounded-lg p-2 mb-1"},$e={key:0,class:"text-center"},De=["onClick"],Ee={key:1,class:"text-start"},Le={class:"w-40 truncate"},Ve={key:0,class:"text-center"},Me=["href"],Fe={key:1,class:"text-center"},Se={__name:"ViewOneDelivery",setup(I){const E={paid:"bg-green-100 text-green-700",cod:"bg-blue-100 text-blue-700",remaining_fees:"bg-yellow-100 text-yellow-700",active:"bg-green-100 text-green-700 rounded-full",inactive:"bg-red-100 text-red-700 rounded-full",suspended:"bg-yellow-200 text-yellow-700 rounded-full",created:"bg-gray-100 text-gray-700",assigned_to_driver:"bg-indigo-100 text-indigo-700",in_progress:"bg-blue-100 text-blue-700",delivered:"bg-green-100 text-green-700",cancelled:"bg-red-100 text-red-700",postponed:"bg-yellow-100 text-yellow-700"},b=q(),w=R(),g=O(),u=i([]),d=i({}),C=i([]),k=i([]),L=i([]),n=i(""),c=i(!1),V=[{label:"Ø±Ù‚Ù… Ø§Ù„Ø´Ø­Ù†Ø©",key:"tracking_number"},{label:"Ø§Ù„ØªØ§Ø±ÙŠØ®",key:"created"},{label:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†",key:"address"},{label:"Ø§Ù„Ù…Ø¨Ù„Øº",key:"total_cost"},{label:"Ø§Ù„Ø­Ø§Ù„Ø©",key:"status"}],$=i(null),D=s=>{s?.start&&s?.end&&(n.value?.start!==s.start||n.value?.end!==s.end)&&(n.value=s,f())},_=[{label:"Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©",key:"id"},{label:"Ø§Ù„ØªØ§Ø±ÙŠØ®",key:"created"},{label:"Ø§Ù„Ù†ÙˆØ¹",key:"transaction_type"},{label:"Ø§Ù„Ù…Ø¨Ù„Øº",key:"amount"},{label:"Ù…Ø±ØªØ¬Ø¹",key:"is_rolled_back"},{label:"Ø§Ù„Ø´Ø­Ù†Ø©",key:"order"},{label:"Ø§Ù„Ù…Ù„Ù",key:"file"},{label:"Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª",key:"notes"}],M=()=>g.back(),y=async s=>{console.log("status",s),c.value=!0;const t={is_active:s==="active"};B.patch(`drivers/${w.params.id}/`,t).then(l=>{c.value=!1,b.success("ØªÙ… ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ Ø¨Ù†Ø¬Ø§Ø­"),f()}).catch(l=>{}).finally(()=>{c.value=!1})},f=async()=>{try{c.value=!0;const s={};n.value&&(s.start_date=n.value.start,s.end_date=n.value.end);const l=(await B.get(`drivers/${w.params.id}/`,{params:s})).data;d.value=l,C.value=l.orders||[],k.value=l.transactions||[],L.value=l.prices||[],u.value=[{label:"Ø±Ù‚Ù… Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨",value:l.full_name},{label:"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ",value:l.phone_number},{label:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",value:l.email}],n.value&&b.info(`ğŸ“… ØªÙ… Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„ØªØ§Ø±ÙŠØ® ${n.value.start+" - "+n.value.end}`)}catch(s){c.value=!1,console.error(s),b.error("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨")}finally{c.value=!1}};return P(()=>f()),(s,t)=>{const l=S("router-link");return c.value?(m(),G(W,{key:0})):(m(),v("div",xe,[e("div",be,[e("div",_e,[e("img",{src:Z,onClick:M,alt:""}),e("h1",ye,p(d.value.full_name),1)]),r(J,{mode:"range",modelValue:$.value,"onUpdate:modelValue":t[0]||(t[0]=a=>$.value=a),placeholder:"Ø§Ø®ØªØ± Ù†Ø·Ø§Ù‚ Ø§Ù„ØªØ§Ø±ÙŠØ®",onFormattedDateChange:D},null,8,["modelValue"])]),e("div",he,[r(A,{title:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª",currency:"Ø¬.Ù…",value:d.value?.sales,trend:"up"},null,8,["value"]),r(A,{title:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ",currency:"Ø¬.Ù…",value:d.value?.balance,trend:"down",note:d.value?.balance<0?"ØªØ­ØªØ§Ø¬ Ø§Ù„ÙŠ ØªØ­ÙˆÙŠÙ„ Ø§Ù…ÙˆØ§Ù„":"ØªØ­ØªØ§Ø¬ Ø§Ù„ÙŠ ØªØ­ØµÙŠÙ„ Ø§Ù…ÙˆØ§Ù„ "},null,8,["value","note"]),r(A,{title:"Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª",currency:"Ø·Ù„Ø¨Ø§Øª",value:d.value?.order_count,trend:"up"},null,8,["value"]),r(Q,{title:"Ø­Ø§Ù„Ù‡ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨",value:d.value.is_active?"active":"inactive",onChange:y,trend:"up"},null,8,["value"])]),e("div",we,[r(ae,{data:u.value,class:"col-span-12 lg:col-span-12 xl:col-span-6 2xl:col-span-7"},null,8,["data"]),r(fe,{class:"col-span-12 lg:col-span-12 xl:col-span-6 2xl:col-span-5",onUpdate:f})]),r(N,{headers:V,data:C.value,title:"Ø´Ø­Ù†Ø§Øª Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨",routeName:"dashboard-shipmentslist",class:"min-h-[300px] mb-6",query:{driverName:d.value.full_name,driverId:d.value.id}},{status:o(({row:a})=>[e("p",{class:j(["text-center p-2 rounded-3xl text-sm w-40",E[a.status]])},p(a.status_ar),3)]),created:o(({row:a})=>[e("span",null,p(h(T)(a.created)),1)]),location:o(({row:a})=>[e("span",Ce,p(a.customer.location||"-"),1)]),address:o(({row:a})=>[e("span",null,p(a.customer.address),1)]),action:o(({row:a})=>[e("button",ke,[r(l,{to:{name:"view-one-shipments",params:{id:a.id}},class:"text-black hover:bg-gray-100 flex gap-2"},{default:o(()=>[...t[1]||(t[1]=[e("img",{src:K,alt:""},null,-1),x(" Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„ ",-1)])]),_:1},8,["to"])])]),_:1},8,["data","query"]),r(N,{headers:_,data:k.value,title:"Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©",routeName:"dashboard-transactions",class:"min-h-[300px] mb-6",query:{driverName:d.value.full_name}},{order:o(({row:a})=>[e("div",null,[a.order?(m(),v("div",$e,[e("div",{onClick:()=>h(g).push({name:"view-one-shipments",params:{id:a.order}}),rel:"noopener noreferrer",class:"text-blue-600 underline text-start"}," Ø¹Ø±Ø¶ ",8,De)])):(m(),v("div",Ee,"-"))])]),is_rolled_back:o(({row:a})=>[x(p(a.is_rolled_back?"Ù†Ø¹Ù…":"Ù„Ø§"),1)]),created:o(({row:a})=>[e("span",null,p(h(T)(a.created)),1)]),notes:o(({row:a})=>[e("span",Le,p(a.notes),1)]),file:o(({row:a})=>[a.file?(m(),v("span",Ve,[e("a",{href:a.file,target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 underline"}," Ø¹Ø±Ø¶ ",8,Me)])):(m(),v("span",Fe,"-"))]),transaction_type:o(({row:a})=>[e("p",{class:j(["px-2 py-1 rounded-[12px] text-center text-sm w-40",a.transaction_type==="deposit"?"bg-green-100 text-green-800":a.transaction_type==="withdraw"?"bg-red-100 text-red-800":a.transaction_type==="expense"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"])},p(a.transaction_type==="deposit"?"Ø¥ÙŠØ¯Ø§Ø¹":a.transaction_type==="withdraw"?"Ø³Ø­Ø¨":"Ù…ØµØ±ÙˆÙØ§Øª"),3)]),_:1},8,["data","query"])]))}}};export{Se as default};
